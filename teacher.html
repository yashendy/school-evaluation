<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
  <meta charset="UTF-8"/>
  <title>Ù„ÙˆØ­Ø© ØªØ­ÙƒÙ… Ø§Ù„Ù…Ø¹Ù„Ù…</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-firestore-compat.js"></script>
  <script src="firebase-config.js"></script>
  <style>
    body { margin:0;font-family:'Segoe UI',sans-serif;background:#f4f6fa;direction:rtl; }
    .main-container { display:flex;min-height:100vh; }
    .sidebar { width:260px;background:#0288d1;color:#fff;padding:30px 20px;text-align:center; }
    .sidebar img { width:100px;margin-bottom:10px; }
    #teacher-name { font-size:22px;margin-bottom:30px; }
    .sidebar button{ width:100%;padding:12px;margin:8px 0;background:#fff;color:#0288d1;border:none;border-radius:6px;cursor:pointer; }
    .sidebar button:hover{ background:#cbefff; }
    .content { flex:1;padding:40px;font-size:18px;color:#333; }
    select,input,button { width:100%;padding:8px;margin:6px 0;font-size:16px;border:1px solid #ccc;border-radius:4px; }
    table { width:100%;border-collapse:collapse;margin-top:20px; background:white; }
    th,td { border:1px solid #ccc;padding:10px;text-align:center; }
    th { background:#eee; }
    .save-btn { background:#0288d1;color:#fff;border:none;padding:8px 16px;font-size:16px;border-radius:5px;cursor:pointer; }
    .delete-btn { background:transparent;color:red;font-weight:bold;cursor:pointer;border:none; }
    .grade-absent { background:#f0f0f0; }
    .grade-top { background:#d4edda; }
    .grade-good { background:#cce5ff; }
    .grade-encourage { background:#ffe5b4; }
  </style>
</head>
<body>
<div class="main-container">
  <aside class="sidebar">
    <img src="logo.png" alt="Logo">
    <h3 id="teacher-name">ØªØ­Ù…ÙŠÙ„...</h3>
    <button data-section="classes">ğŸ“˜ Ø§Ù„ÙØµÙˆÙ„</button>
    <button data-section="students">ğŸ‘¨â€ğŸ“ Ø§Ù„Ø·Ù„Ø§Ø¨</button>
    <button data-section="evaluation">ğŸ“ Ø§Ù„ØªÙ‚ÙŠÙŠÙ…Ø§Øª</button>
    <button onclick="auth.signOut().then(()=>location.href='index.html')">ğŸšª ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø®Ø±ÙˆØ¬</button>
  </aside>
  <main class="content"><div id="main-content"></div></main>
</div>

<script>
const auth = firebase.auth();
const db = firebase.firestore();
let currentTeacherId = null;

auth.onAuthStateChanged(async user => {
  if (!user) return location.href='index.html';
  currentTeacherId = user.uid;
  const doc = await db.collection('users').doc(user.uid).get();
  document.getElementById('teacher-name').textContent = `Ø£. ${doc.data().name}`;
  document.querySelectorAll('.sidebar button[data-section]').forEach(b=>b.addEventListener('click',()=>showSection(b.dataset.section)));
  showSection('classes');
});

function showSection(section){
  const main = document.getElementById('main-content');
  if(section==='classes'){
    main.innerHTML=`
      <h2>â• Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ÙØµÙˆÙ„</h2>
      <div><select id="c-grade"><option>Ø§Ù„ØµÙ Ø§Ù„Ø±Ø§Ø¨Ø¹</option><option>Ø§Ù„ØµÙ Ø§Ù„Ø®Ø§Ù…Ø³</option><option>Ø§Ù„ØµÙ Ø§Ù„Ø³Ø§Ø¯Ø³</option></select>
      <select id="c-system"><option>Ø¹Ø±Ø¨ÙŠ</option><option>Ù„ØºØ§Øª</option></select>
      <select id="c-section"><option>A</option><option>B</option></select>
      <button class="save-btn" onclick="addClass()">Ø¥Ø¶Ø§ÙØ© ÙØµÙ„</button></div>
    `;
  } else if(section==='students'){
    main.innerHTML=`
      <h2>â• Ø¥Ø¶Ø§ÙØ© Ø·Ø§Ù„Ø¨ Ø¬Ø¯ÙŠØ¯</h2>
      <div>
        <select id="s-grade"></select><select id="s-system"></select><select id="s-section"></select>
        <input type="text" id="s-name" placeholder="Ø§Ø³Ù… Ø§Ù„Ø·Ø§Ù„Ø¨"/>
        <select id="s-gender"><option value="male">Ø°ÙƒØ±</option><option value="female">Ø£Ù†Ø«Ù‰</option></select>
        <select id="s-religion"><option value="muslim">Ù…Ø³Ù„Ù…</option><option value="christian">Ù…Ø³ÙŠØ­ÙŠ</option></select>
        <button class="save-btn" onclick="addStudent()">Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ø·Ø§Ù„Ø¨</button>
      </div>
      <h3>ğŸ“‹ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø·Ù„Ø§Ø¨ Ù„Ù‡Ø°Ø§ Ø§Ù„ÙØµÙ„</h3>
      <table id="students-table"><thead><tr><th>Ø§Ù„Ø§Ø³Ù…</th><th>Ø§Ù„Ù†ÙˆØ¹</th><th>Ø§Ù„Ø¯ÙŠØ§Ù†Ø©</th><th>Ø±Ù‚Ù… Ø§Ù„Ø¬Ù„ÙˆØ³</th></tr></thead><tbody></tbody></table>
    `;
    loadClassDropdowns();
  } else if(section==='evaluation'){
    main.innerHTML=`...`; // Ø§ØªØ±Ùƒ Ø§Ù„ØªÙ‚ÙŠÙŠÙ… ÙƒÙ…Ø§ ÙÙŠ Ø§Ù„ØªØµÙ…ÙŠÙ… Ø§Ù„Ø³Ø§Ø¨Ù‚
  }
}

// ... Ø§Ù„ÙƒÙˆØ¯ Ø§Ù„Ø®Ø§Øµ Ø¨Ø¥Ø¶Ø§ÙØ© Ø§Ù„ÙØµÙ„ØŒ Ø§Ù„Ø·Ø§Ù„Ø¨ØŒ Ø±Ù‚Ù… Ø§Ù„Ø¬Ù„ÙˆØ³ØŒ Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø·Ù„Ø§Ø¨ ØªÙ„Ù‚Ø§Ø¦ÙŠÙ‹Ø§
// ØªÙ…Ø§Ù…Ù‹Ø§ ÙƒÙ…Ø§ ÙÙŠ Ø§Ù„Ù†Ø³Ø®Ø© Ø§Ù„Ø³Ø§Ø¨Ù‚Ø© Ù„ÙƒÙ† Ø¯Ø§Ø®Ù„ Ù†ÙØ³ Ø§Ù„Ù€ <script> Ø®Ø§Øµ Ø¨Ø§Ù„Ø¹Ù†Ø§ØµØ± Ø£Ø¹Ù„Ø§Ù‡

</script>
</body>
</html>
